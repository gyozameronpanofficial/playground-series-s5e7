# Kaggle Playground Series S5E7: 内向型・外向型予測 EDA分析レポート

**日付**: 2025-07-02  
**タスク**: 二値分類（内向型 vs 外向型予測）  
**目標**: Accuracy Score の最大化

---

## 1. データセット概要

### 基本情報
- **訓練データ**: 18,524 行 × 9 列
- **テストデータ**: 6,175 行 × 8 列
- **特徴量**: 7個（数値5個、カテゴリカル2個）
- **ターゲット**: `Personality` (Extrovert/Introvert)

### 特徴量一覧
1. **Time_spent_Alone** (数値): 1人で過ごす時間
2. **Stage_fear** (カテゴリカル): ステージ恐怖症 (Yes/No)
3. **Social_event_attendance** (数値): 社交イベント参加頻度
4. **Going_outside** (数値): 外出頻度
5. **Drained_after_socializing** (カテゴリカル): 社交後の疲労 (Yes/No)
6. **Friends_circle_size** (数値): 友人サークルサイズ
7. **Post_frequency** (数値): SNS投稿頻度

---

## 2. ターゲット変数分析

### クラス分布
- **Extrovert (外向型)**: 13,699件 (74.0%)
- **Introvert (内向型)**: 4,825件 (26.0%)

### 重要な洞察
✅ **クラス不均衡あり**: 外向型が約3:1の比率で多数  
✅ **対処必要**: 層化サンプリング、適切な評価指標、クラス重み調整を検討

---

## 3. 欠損値分析

### 欠損値パターン（訓練データ）
| 特徴量 | 欠損数 | 欠損率 |
|--------|--------|--------|
| Stage_fear | 1,893 | 10.22% |
| Going_outside | 1,466 | 7.91% |
| Post_frequency | 1,264 | 6.82% |
| Time_spent_Alone | 1,190 | 6.42% |
| Social_event_attendance | 1,180 | 6.37% |
| Drained_after_socializing | 1,149 | 6.20% |
| Friends_circle_size | 1,054 | 5.69% |

### 重要な洞察
⚠️ **全特徴量に欠損値**: 5.69%〜10.22%の範囲  
⚠️ **MNAR可能性**: 性格特性に関連した欠損パターンの可能性  
✅ **対処戦略**: 複数の補完手法を検討（平均値、中央値、予測型補完）

---

## 4. 数値特徴量分析

### 基本統計量
| 特徴量 | 平均 | 標準偏差 | 最小値 | 最大値 | 中央値 |
|--------|------|----------|--------|--------|--------|
| Time_spent_Alone | 3.14 | 3.00 | 0.0 | 11.0 | 2.0 |
| Social_event_attendance | 4.60 | 2.93 | 0.0 | 10.0 | 5.0 |
| Going_outside | 3.48 | 1.74 | 0.0 | 7.0 | 4.0 |
| Friends_circle_size | 7.99 | 4.65 | 0.0 | 15.0 | 8.0 |
| Post_frequency | 4.98 | 2.88 | 0.0 | 10.0 | 5.0 |

### 重要な洞察
✅ **適切な範囲**: すべて0以上の合理的な値  
✅ **分散あり**: 標準偏差が適度で予測に有用  
⚠️ **一部偏り**: Time_spent_Aloneは右裾を引く分布

---

## 5. カテゴリカル特徴量分析

### Stage_fear分布
- **No**: 12,609件 (68.1%)
- **Yes**: 4,022件 (21.7%)
- **欠損**: 1,893件 (10.2%)

### Drained_after_socializing分布
- **No**: 13,313件 (71.9%)
- **Yes**: 4,062件 (21.9%)
- **欠損**: 1,149件 (6.2%)

### 重要な洞察
✅ **バランス適度**: 両特徴量ともYes/Noが2:1程度の比率  
✅ **予測力期待**: 内向性と関連する心理的特徴

---

## 6. データ品質チェック

### データ品質
- **重複行**: 訓練・テスト共に0件
- **ID重複**: なし
- **データ整合性**: 良好

### 外れ値分析
- **Time_spent_Alone**: 最大値11は適正範囲内
- **Social_event_attendance**: 0-10の範囲で自然
- **Going_outside**: 0-7の範囲で適正
- **Friends_circle_size**: 0-15で合理的
- **Post_frequency**: 0-10で自然

---

## 7. 特徴量間相関分析

### 主要相関関係
1. **Social_event_attendance ↔ Going_outside**: 中程度の正相関
2. **Time_spent_Alone**: 他特徴量と弱い負相関傾向
3. **Post_frequency**: 社交関連特徴量と弱い正相関

### 重要な洞察
✅ **多重共線性低**: 強い相関関係は少数  
✅ **独立性高**: 各特徴量が独自の情報を提供  
✅ **特徴量相互作用**: 可能性があり、後でエンジニアリング対象

---

## 8. 心理学的妥当性検証

### Big Five理論との整合性
✅ **外向性指標**: Social events, Going outside, Friends circle  
✅ **内向性指標**: Time alone, Stage fear, Post-social draining  
✅ **行動一貫性**: 特徴量間の関係が理論と合致

---

## 9. 機械学習への影響と推奨事項

### データ前処理推奨事項
1. **欠損値処理**: 
   - 数値: KNN補完、予測型補完を検討
   - カテゴリカル: モード補完、'Unknown'カテゴリ追加

2. **特徴量スケーリング**: 
   - StandardScaler適用（ニューラルネット用）
   - 树系アルゴリズムには不要

3. **クラス不均衡対処**:
   - StratifiedKFold使用
   - class_weight='balanced'設定
   - SMOTE等のサンプリング手法検討

### 特徴量エンジニアリング推奨事項
1. **相互作用特徴量**: Social×Going_outside等
2. **比率特徴量**: Time_alone/Social_events等
3. **一貫性メトリクス**: 回答パターンの一貫性
4. **欠損値フラグ**: 欠損パターン自体が特徴量

### モデル選択推奨事項
1. **ベースライン**: ロジスティック回帰、ランダムフォレスト
2. **主力**: LightGBM、XGBoost（欠損値に強い）
3. **高度**: ニューラルネットワーク（相互作用捕捉）
4. **アンサンブル**: 多様性確保でスタッキング

---

## 10. リスクと対策

### 特定リスク
⚠️ **データリーケージ**: 訓練・テスト分離の徹底  
⚠️ **過学習**: 性格データのノイズに注意  
⚠️ **文化的偏向**: サンプル集団の代表性確認  

### 成功要因
✅ **ドメイン知識活用**: 心理学理論に基づく特徴量設計  
✅ **頑健な検証**: 複数CV戦略の並行実行  
✅ **解釈可能性**: 特徴量重要度の心理学的妥当性確認

---

## 次のステップ

1. **特徴量エンジニアリング**: 心理学的知見を活用した新特徴量作成
2. **ベースラインモデル**: 複数アルゴリズムでの性能比較
3. **ハイパーパラメータ最適化**: Optuna使用による自動調整
4. **アンサンブル構築**: 多様なモデル組合せによる性能向上
5. **モデル解釈**: SHAP等による予測根拠の心理学的検証

---

**分析実施者**: Osawa  
**使用ツール**: Python (pandas, seaborn, matplotlib)  
**可視化ファイル**: notebooks/EDA_Analysis.ipynbに保存済み